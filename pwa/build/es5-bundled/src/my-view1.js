define(["./my-app.js"],function(_myApp){"use strict";function _templateObject3_6f38bb9061d811e9aa0d898281055e36(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style include=\"shared-styles\">\n        :host {\n          display: block;\n          padding: 10px;\n        }\n      </style>\n\n      <div class=\"card\">\n        <div class=\"circle\">1</div>\n        <h1>Random Image with Alterations</h1>\n        <p>Display a random image</p>\n        <random-processed-image></random-processed-image>\n      </div>\n    "]);_templateObject3_6f38bb9061d811e9aa0d898281055e36=function _templateObject3_6f38bb9061d811e9aa0d898281055e36(){return data};return data}function _templateObject2_6f38bb9061d811e9aa0d898281055e36(){var data=babelHelpers.taggedTemplateLiteral(["\n            <canvas id=\"original\"></canvas>\n            <canvas id=\"randomimage\"></canvas>\n        "]);_templateObject2_6f38bb9061d811e9aa0d898281055e36=function _templateObject2_6f38bb9061d811e9aa0d898281055e36(){return data};return data}function _templateObject_6f38bb9061d811e9aa0d898281055e36(){var data=babelHelpers.taggedTemplateLiteral(["\n            <img src$={{imageUrl}} alt=\"A random image\"/>\n        "]);_templateObject_6f38bb9061d811e9aa0d898281055e36=function _templateObject_6f38bb9061d811e9aa0d898281055e36(){return data};return data}var imageBaseUrl="https://picsum.photos/200?random",RandomImage=/*#__PURE__*/function(_PolymerElement){babelHelpers.inherits(RandomImage,_PolymerElement);function RandomImage(){var _this;babelHelpers.classCallCheck(this,RandomImage);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(RandomImage).call(this));_this.imageUrl=imageBaseUrl;return _this}babelHelpers.createClass(RandomImage,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(RandomImage.prototype),"ready",this).call(this);this.setTimer()}},{key:"setTimer",value:function setTimer(){var _this2=this;setInterval(function(_){_this2.imageUrl=imageBaseUrl+"&cache_prevention="+Math.floor(1e3*Math.random())},this.refreshFrequency)}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject_6f38bb9061d811e9aa0d898281055e36())}},{key:"properties",get:function get(){return{refreshFrequency:{type:Number,value:5e3}}}}]);return RandomImage}(_myApp.PolymerElement);customElements.define("random-image",RandomImage);var imageBaseUrl$1="https://picsum.photos/200?random",refreshFrequency=5e3,RandomProcessedImage=/*#__PURE__*/function(_PolymerElement2){babelHelpers.inherits(RandomProcessedImage,_PolymerElement2);function RandomProcessedImage(){babelHelpers.classCallCheck(this,RandomProcessedImage);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(RandomProcessedImage).apply(this,arguments))}babelHelpers.createClass(RandomProcessedImage,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(RandomProcessedImage.prototype),"ready",this).call(this);this._initContext();this._fetchImage();this.startTimer()}},{key:"startTimer",value:function startTimer(){var _this3=this;setInterval(function(_){console.log("Fetching fresh image");_this3._fetchImage()},refreshFrequency)}},{key:"_fetchImage",value:function _fetchImage(){var _this4=this,image=new Image;image.crossOrigin="anonymous";image.onload=function(){_this4.$.original.getContext("2d").drawImage(image,0,0);_this4._processImage(image)};image.src=imageBaseUrl$1+"&cache_prevention="+Math.floor(1e3*Math.random())}},{key:"_processImage",value:function _processImage(image){var canvas=this.$.randomimage;this.glContext.drawImage(image,0,0);var imageData=this.glContext.getImageData(0,0,canvas.width,canvas.height),data=imageData.data;invertColours(data);applyContrast(data,40);this.glContext.putImageData(imageData,0,0)}},{key:"_initContext",value:function _initContext(){var canvas=this.$.randomimage;this.glContext=canvas.getContext("2d")}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject2_6f38bb9061d811e9aa0d898281055e36())}}]);return RandomProcessedImage}(_myApp.PolymerElement);customElements.define("random-processed-image",RandomProcessedImage);/* Functions for image manipulation */function invertColours(data){for(var i=0;i<data.length;i+=4){data[i]=255^data[i];// Invert Red
data[i+1]=255^data[i+1];// Invert Green
data[i+2]=255^data[i+2];// Invert Blue
}return data}function truncateColor(value){if(0>value){value=0}else if(255<value){value=255}return value}function applyContrast(data,contrast){for(var factor=259*(contrast+255)/(255*(259-contrast)),i=0;i<data.length;i+=4){data[i]=truncateColor(factor*(data[i]-128)+128);data[i+1]=truncateColor(factor*(data[i+1]-128)+128);data[i+2]=truncateColor(factor*(data[i+2]-128)+128)}}var MyView1=/*#__PURE__*/function(_PolymerElement3){babelHelpers.inherits(MyView1,_PolymerElement3);function MyView1(){babelHelpers.classCallCheck(this,MyView1);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(MyView1).apply(this,arguments))}babelHelpers.createClass(MyView1,null,[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject3_6f38bb9061d811e9aa0d898281055e36())}}]);return MyView1}(_myApp.PolymerElement);window.customElements.define("my-view1",MyView1)});